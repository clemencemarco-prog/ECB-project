import pandas as pd
from data import load_prices

def build_daily_changes(df: pd.DataFrame) -> pd.DataFrame:
    out = pd.DataFrame(index=df.index)
    for c in ["EUROSTOXX50","EUFN","XLU","EURUSD"]:
        if c in df:
            out[c] = df[c].pct_change()
        return out.dropna()

cf = load_prices(240)
chg = build_daily_changes(cf)
print(chg.tail())

chg = build_daily_changes(cf)   # <-- transforme prix en variations %
chg.plot(figsize=(9,5))
plt.title("Variations journaliÃ¨res (%)")
plt.show()

if len(data) == 0:
    return pd.DataFrame()
return pd.DataFrame(data)
